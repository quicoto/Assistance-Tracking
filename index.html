<!DOCTYPE HTML>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<!--  Mobile viewport scale | Disable user zooming as the layout is optimised -->
		<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
		<title>Assitance Tracking</title>
		<meta name="theme-color" content="#3498db">

		<link rel="apple-touch-icon" sizes="180x180" href="assets/images/apple-touch-icon.png">
		<link rel="icon" type="image/png" sizes="32x32" href="assets/images/favicon-32x32.png">
		<link rel="icon" type="image/png" sizes="16x16" href="assets/images/favicon-16x16.png">
		<link rel="manifest" href="manifest.json">
		<link rel="mask-icon" href="assets/images/safari-pinned-tab.svg" color="#5bbad5">
		<link rel="shortcut icon" href="assets/images/favicon.ico">
		<meta name="msapplication-config" content="assets/images/browserconfig.xml">

		<link rel="stylesheet" href="assets/css/bootstrap.min.css">
		<link rel="stylesheet" href="assets/css/custom.css?ver=1.3">
		<script src="assets/js/lodash.min.js"></script>
		<script src="assets/js/vue.min.js"></script>
		<script src="assets/js/firebase.js"></script>
		<script src="assets/js/vuefire.min.js"></script>
	</head>

	<body class="container">

		<div id="app" v-cloak>
			<div class="row justify-content-md-center">
				<div class="col">
					<h2 class="site-title text-center">Assitance Tracking</h2>
				</div>
			</div>

			<div class="row justify-content-md-center" v-if="!students">
				<div class="col-md-6">
					<form>
						<div class="form-group">
							<input v-model="email" type="email" class="form-control" id="email" aria-describedby="emailHelp" placeholder="Enter email">
						</div>
						<div class="form-group">
							<input v-model="password" type="password" class="form-control" id="password" placeholder="Password">
						</div>
						<button type="button" class="btn btn-primary btn-block" @click="logIn($event)">Log in</button>
					</form>
				</div>
			</div>

			<section v-if="students">
				<div class="row justify-content-center">
					<div class="col-12 text-center" v-if="configuration.startingDate">
						<h5 class="startingDate text-secondary">From {{configuration.startingDate}}</h5>
						<h6 class="startingDate text-secondary">Minimum assistance set to {{configuration.minimumAssistance}}%</h6>
					</div>
					<div class="col-6 col-md-4">
						<button v-if="multiplier === 1" type="button" class="btn btn-primary btn-block" v-on:click="multiplier = 2">Single class</button>
						<button v-if="multiplier === 2" type="button" class="btn btn-primary btn-block" v-on:click="multiplier = 1">Double class</button>
					</div>
					<div class="col-6 col-md-4">
						<button type="button" class="btn btn-block btn-primary" v-on:click="listMode = !listMode">
							List Mode
							<span v-if="listMode">ON</span>
							<span v-if="!listMode">OFF</span>
						</button>
					</div>
				</div>
			</section>

			<section v-if="students && !listMode">
				<div class="row justify-content-md-center student-list">
					<div class="col-12 col-md-8 student" v-for="student in orderedStudents">
						<div class="row">
							<div class="col-5 text-center">
								{{ student.name }}
							</div>

							<div class="col-2">
								<button type="button" class="btn btn-success btn-block" v-on:click="increaseTime(student)">+</button>
							</div>

							<div class="col-2">
								<button type="button" class="btn btn-danger btn-block" v-on:click="decreaseTime(student)">-</button>
							</div>

							<div class="col-3 text-center">
								<span v-if="student.hours > 0">
									{{ student.hours }}
								</span>
								<span v-else>
									-
								</span>
								<span v-if="student.hours > 0 && student.hours > 1">hours</span>
								<span v-if="student.hours == 1">hour</span>
							</div>
						</div>
					</div>
				</div>

				<div class="row justify-content-md-center">
					<div class="col-md-8">
						<button type="button" class="btn btn-dark btn-block" @click="logOut()">Log out</button>
					</div>
				</div>
			</section>
			<section v-if="students && listMode">
				<table class="table table-striped table-responsive studentListMode">
					<thead>
						<tr>
							<th>Student</th>
							<th>Required</th>
							<th>Done</th>
							<th>%</th>
						</tr>
					</thead>
					<tr v-for="student in orderedStudents">
						<td>{{student.name}}</td>
						<td>{{configuration.requiredHours}}</td>
						<td>{{student.hours}}</td>
						<td>
							<span v-if="percentage(student.hours)" :class="[percentage(student.hours) >= configuration.minimumAssistance ? 'text-success' : 'text-danger']">
								{{percentage(student.hours)}}%
							</span>
							<span v-else>
								-
							</span>
						</td>
					</tr>
				</table>
			</section>
		</div>

		<script src="assets/js/app.js?ver=1.1"></script>
	</body>
</html>
